import re
import base64
import os

def decode_base64(encoded_string):
    try:
        # Adding padding to ensure length is a multiple of 4
        while len(encoded_string) % 4 != 0:
            encoded_string += '='
        
        decoded_bytes = base64.b64decode(encoded_string)
        decoded_string = decoded_bytes.decode('utf-8')
        return decoded_string
    except Exception as e:
        print(f"Error decoding base64: {e}")
        return None

def extract_and_decode_ng_bind_html_values(html_file):
    with open(html_file, 'r', encoding='utf-8') as file:
        content = file.read()
        matches = re.findall(r'ng-bind-html="([^"]*)"', content)
        decoded_values = [decode_base64(match) for match in matches if match]
        return decoded_values

def process_folder(folder_path):
    decoded_values = set()

    for filename in os.listdir(folder_path):
        if filename.endswith('.html'):
            file_path = os.path.join(folder_path, filename)
            decoded_values.update(extract_and_decode_ng_bind_html_values(file_path))

    return list(decoded_values)

if __name__ == "__main__":
    folder_path = "c:/logs"
    decoded_values = process_folder(folder_path)

    print("Decoded Unique ng-bind-html Values:")
    for value in decoded_values:
        print(value)